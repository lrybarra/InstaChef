require 'open-uri'
require 'net/http'
require 'json'
require 'nokogiri'

# APP_KEY = ""
# APP_ID = ""
# url = "http://api.yummly.com/v1/api/recipe/Tropical-Grilled-Chicken-Breast-AllRecipes-39303?_app_id=#{APP_ID}&_app_key=#{APP_KEY}"
#
# uri = URI.parse(URI.escape(url))
#
# response = Net::HTTP.get(uri)
# response = JSON.parse(response)
response = {"yield"=>"4 servings", "nutritionEstimates"=>[{"attribute"=>"K", "description"=>"Potassium, K", "value"=>0.09, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"FLD", "description"=>"Fluoride, F", "value"=>0.0, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"PHYSTR", "description"=>"Phytosterols", "value"=>0.0, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"SITSTR", "description"=>"Beta-sitosterol", "value"=>0.0, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"FASAT", "description"=>"Fatty acids, total saturated", "value"=>0.01, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"FOLDFE", "description"=>"Folate, DFE", "value"=>11.11, "unit"=>{"id"=>"4d783ee4-aa07-4958-84bf-3f4b528049dc", "name"=>"mcg_DFE", "abbreviation"=>"mcg_DFE", "plural"=>"mcg_DFE", "pluralAbbreviation"=>"mcg_DFE", "decimal"=>false}}, {"attribute"=>"MN", "description"=>"Manganese, Mn", "value"=>0.0, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"GALS", "description"=>"Galactose", "value"=>0.16, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"GLUS", "description"=>"Glucose (dextrose)", "value"=>1.91, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"FOLFD", "description"=>"Folate, food", "value"=>0.0, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"FE", "description"=>"Iron, Fe", "value"=>0.0, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"ENERC_KJ", "description"=>"Energy", "value"=>148.78, "unit"=>{"id"=>"fea252f8-9888-4365-b005-e2c63ed3a776", "name"=>"calorie", "abbreviation"=>"kcal", "plural"=>"calories", "pluralAbbreviation"=>"kcal", "decimal"=>true}}, {"attribute"=>"VITB6A", "description"=>"Vitamin B-6", "value"=>0.0, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"FRUS", "description"=>"Fructose", "value"=>2.17, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"TOCPHA", "description"=>"Vitamin E (alpha-tocopherol)", "value"=>0.0, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"WATER", "description"=>"Water", "value"=>40.33, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"SUGAR", "description"=>"Sugars, total", "value"=>7.14, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"FAMS", "description"=>"Fatty acids, total monounsaturated", "value"=>0.01, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"ASH", "description"=>"Ash", "value"=>0.03, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"SE", "description"=>"Selenium, Se", "value"=>0.0, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"FIBTG", "description"=>"Fiber, total dietary", "value"=>0.53, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"PROCNT", "description"=>"Protein", "value"=>0.5, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"CHOCDF", "description"=>"Carbohydrate, by difference", "value"=>9.19, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"FOL", "description"=>"Folate, total", "value"=>0.0, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"VITK", "description"=>"Vitamin K (phylloquinone)", "value"=>0.0, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"LUT+ZEA", "description"=>"Lutein + zeaxanthin", "value"=>0.0, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"CARTA", "description"=>"Carotene, alpha", "value"=>0.0, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"STID7", "description"=>"Stigmasterol", "value"=>0.0, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"P", "description"=>"Phosphorus, P", "value"=>0.01, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"PANTAC", "description"=>"Pantothenic acid", "value"=>0.0, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"CHOLN", "description"=>"Choline, total", "value"=>0.0, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"CA", "description"=>"Calcium, Ca", "value"=>0.01, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"MG", "description"=>"Magnesium, Mg", "value"=>0.01, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"FAPU", "description"=>"Fatty acids, total polyunsaturated", "value"=>0.04, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"VITA_RAE", "description"=>"Vitamin A, RAE", "value"=>13.4, "unit"=>{"id"=>"0fcf76b3-891a-403d-883f-58c8809ef151", "name"=>"mcg_RAE", "abbreviation"=>"mcg_RAE", "plural"=>"mcg_RAE", "pluralAbbreviation"=>"mcg_RAE", "decimal"=>false}}, {"attribute"=>"NIA", "description"=>"Niacin", "value"=>0.0, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"CRYPX", "description"=>"Cryptoxanthin, beta", "value"=>0.0, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"F16D0", "description"=>"16:0", "value"=>0.01, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"F18D1", "description"=>"18:1 undifferentiated", "value"=>0.01, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"F18D2", "description"=>"18:2 undifferentiated", "value"=>0.04, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"BETN", "description"=>"Betaine", "value"=>0.0, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"SUCS", "description"=>"Sucrose", "value"=>0.05, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"CARTB", "description"=>"Carotene, beta", "value"=>0.0, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"F18D3", "description"=>"18:3 undifferentiated", "value"=>0.0, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"VITA_IU", "description"=>"Vitamin A, IU", "value"=>269.4, "unit"=>{"id"=>"ed46fe0c-44fe-4c1f-b3a8-880f92e30930", "name"=>"IU", "abbreviation"=>"IU", "plural"=>"IU", "pluralAbbreviation"=>"IU", "decimal"=>true}}, {"attribute"=>"ENERC_KCAL", "description"=>"Energy", "value"=>35.56, "unit"=>{"id"=>"fea252f8-9888-4365-b005-e2c63ed3a776", "name"=>"calorie", "abbreviation"=>"kcal", "plural"=>"calories", "pluralAbbreviation"=>"kcal", "decimal"=>true}}, {"attribute"=>"VITC", "description"=>"Vitamin C, total ascorbic acid", "value"=>0.02, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"RIBF", "description"=>"Riboflavin", "value"=>0.0, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"FAT", "description"=>"Total lipid (fat)", "value"=>0.08, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"ZN", "description"=>"Zinc, Zn", "value"=>0.0, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"MALS", "description"=>"Maltose", "value"=>0.05, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}, {"attribute"=>"NA", "description"=>"Sodium, Na", "value"=>0.0, "unit"=>{"id"=>"12485d26-6e69-102c-9a8a-0030485841f8", "name"=>"gram", "abbreviation"=>"g", "plural"=>"grams", "pluralAbbreviation"=>"grams", "decimal"=>true}}], "prepTimeInSeconds"=>300, "totalTime"=>"47 min", "images"=>[{"hostedSmallUrl"=>"http://lh3.googleusercontent.com/AUo3X5b2KJRvLRs4PbWtW7ETPuOjaxfFt4Sz-4uDIltU68iQt5nTWd-TAK7-xHtcts8N7DhyLJnSPC--lYQawA=s90", "hostedMediumUrl"=>"http://lh3.googleusercontent.com/AUo3X5b2KJRvLRs4PbWtW7ETPuOjaxfFt4Sz-4uDIltU68iQt5nTWd-TAK7-xHtcts8N7DhyLJnSPC--lYQawA=s180", "hostedLargeUrl"=>"http://lh3.googleusercontent.com/AUo3X5b2KJRvLRs4PbWtW7ETPuOjaxfFt4Sz-4uDIltU68iQt5nTWd-TAK7-xHtcts8N7DhyLJnSPC--lYQawA=s360", "imageUrlsBySize"=>{"90"=>"http://lh3.googleusercontent.com/N4OOxoUnNJ46gJ_aOo0Q1y46bzSa6tGkRkVyiD1o72mtRJMgP1o9InwPNVuxvQK-RLf-CT_q4dvqqUL517wS=s90-c", "360"=>"http://lh3.googleusercontent.com/N4OOxoUnNJ46gJ_aOo0Q1y46bzSa6tGkRkVyiD1o72mtRJMgP1o9InwPNVuxvQK-RLf-CT_q4dvqqUL517wS=s360-c"}}], "name"=>"Tropical Grilled Chicken Breast", "source"=>{"sourceDisplayName"=>"AllRecipes", "sourceSiteUrl"=>"http://www.allrecipes.com", "sourceRecipeUrl"=>"http://allrecipes.com/recipe/tropical-grilled-chicken-breast/"}, "prepTime"=>"5 Min", "id"=>"Tropical-Grilled-Chicken-Breast-AllRecipes-39303", "ingredientLines"=>["1/2 cup orange juice", "1/2 lime, juiced", "1 tablespoon honey", "1 teaspoon crushed red pepper flakes", "4 (6 ounce) skinless, boneless chicken breast halves", "1 tablespoon chopped fresh cilantro"], "cookTime"=>"12 Min", "attribution"=>{"html"=>"<a href='http://www.yummly.com/recipe/Tropical-Grilled-Chicken-Breast-AllRecipes-39303'>Tropical Grilled Chicken Breast recipe</a> information powered by <img alt='Yummly' src='http://static.yummly.com/api-logo.png'/>", "url"=>"http://www.yummly.com/recipe/Tropical-Grilled-Chicken-Breast-AllRecipes-39303", "text"=>"Tropical Grilled Chicken Breast recipes: information powered by Yummly", "logo"=>"http://static.yummly.com/api-logo.png"}, "numberOfServings"=>4, "totalTimeInSeconds"=>2820, "attributes"=>{"cuisine"=>["Barbecue"], "cou3shes"]}, "cookTimeInSeconds"=>720, "flavors"=>{}, "rating"=>4}

p response["name"]
source_url = response["source"]["sourceRecipeUrl"]
p response["ingredientLines"]
p response["numberOfServings"]

doc = Nokogiri::HTML(open(source_url))

directions = doc.css('li.step span.recipe-directions__list--item')
directions.pop

directions.each do |step|
  p step.children.first.text
end
